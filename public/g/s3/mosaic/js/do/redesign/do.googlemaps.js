"use strict";(self.webpackChunkdo=self.webpackChunkdo||[]).push([[331],{555:(e,t,r)=>{r.d(t,{w1:()=>f});var s=r(5308),i=r(2882);function o(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]])}return r}"function"==typeof SuppressedError&&SuppressedError;class n{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(Number.isFinite(e.position.lat)&&Number.isFinite(e.position.lng))return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class a{constructor({markers:e,position:t}){this.markers=[],e&&(this.markers=e),t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(n.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>n.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(n.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}function l(e,t="assertion failed"){if(null==e)throw Error(t)}class m{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return c(e)}}const c=e=>e.map((e=>new a({position:n.getPosition(e),markers:[e]})));class h extends m{constructor(e){var{maxZoom:t,radius:r=60}=e,s=o(e,["maxZoom","radius"]);super({maxZoom:t}),this.markers=[],this.clusters=[],this.state={zoom:-1},this.superCluster=new i.A(Object.assign({maxZoom:this.maxZoom,radius:r},s))}calculate(e){let t=!1,r=e.map.getZoom();l(r),r=Math.round(r);const i={zoom:r};if(!(0,s.bD)(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const r=this.markers.map((e=>{const t=n.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(r)}return t||(this.state.zoom<=this.maxZoom||i.zoom<=this.maxZoom)&&(t=!(0,s.bD)(this.state,i)),this.state=i,0===e.markers.length?(this.clusters=[],{clusters:this.clusters,changed:t}):(t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t})}cluster({map:e}){const t=e.getZoom();return l(t),this.superCluster.getClusters([-180,-90,180,90],Math.round(t)).map((e=>this.transformCluster(e)))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){if(r.cluster)return new a({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:t,lng:e}});const s=r.marker;return new a({markers:[s],position:n.getPosition(s)})}}class u{constructor(e,t){this.markers={sum:e.length};const r=t.map((e=>e.count)),s=r.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:s/t.length,sum:s,min:Math.min(...r),max:Math.max(...r)}}}}class p{render({count:e,position:t},r,s){const i=`<svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>\n</svg>`,o=`Cluster of ${e} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+e;if(n.isAdvancedMarkerAvailable(s)){const e=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const r={map:s,position:t,zIndex:a,title:o,content:e};return new google.maps.marker.AdvancedMarkerElement(r)}const l={position:t,zIndex:a,title:o,icon:{url:`data:image/svg+xml;base64,${btoa(i)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(l)}}class g{constructor(){!function(e,t){for(let r in t.prototype)e.prototype[r]=t.prototype[r]}(g,google.maps.OverlayView)}}var d;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click",e.GMP_CLICK="gmp-click"}(d||(d={}));const k=(e,t,r)=>{t.bounds&&r.fitBounds(t.bounds)};class f extends g{constructor({map:e,markers:t=[],algorithmOptions:r={},algorithm:s=new h(r),renderer:i=new p,onClusterClick:o=k}){super(),this.map=null,this.idleListener=null,this.markers=[...t],this.clusters=[],this.algorithm=s,this.renderer=i,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const r=this.markers.indexOf(e);return-1!==r&&(n.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){let r=!1;return e.forEach((e=>{r=this.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,d.CLUSTERING_BEGIN,this);const{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||null==r){const e=new Set;for(const r of t)1==r.markers.length&&e.add(r.markers[0]);const r=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||n.setMap(t.marker,null):r.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>r.forEach((e=>n.setMap(e,null)))))}google.maps.event.trigger(this,d.CLUSTERING_END,this)}}onAdd(){const e=this.getMap();l(e),this.idleListener=e.addListener("idle",this.render.bind(this)),this.render()}onRemove(){this.idleListener&&google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>n.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new u(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((r=>{if(1===r.markers.length)r.marker=r.markers[0];else if(r.marker=this.renderer.render(r,e,t),r.markers.forEach((e=>n.setMap(e,null))),this.onClusterClick){const e=n.isAdvancedMarker(r.marker)?d.GMP_CLICK:d.CLUSTER_CLICK;r.marker.addListener(e,(e=>{google.maps.event.trigger(this,d.CLUSTER_CLICK,r),this.onClusterClick(e,r,t)}))}n.setMap(r.marker,t)}))}}}}]);
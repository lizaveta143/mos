"use strict";(self.webpackChunkdo=self.webpackChunkdo||[]).push([[6],{1770:(e,t,n)=>{n.d(t,{k$:()=>l,N3:()=>o,jo:()=>a});var r=function(e){var t=window.getComputedStyle(e);return"none"===t.display||"hidden"===t.visibility},o=function(e){if(r(e))return!0;for(var t=e.parentElement;t;){if(r(t))return!0;t=t.parentElement}return!1},a=function(e,t){e.forEach((function(e){t.classList.contains(e)&&t.classList.remove(e)}))},i=n(7870),l=function(e){if(!i.U.test(e))throw new Error("Id is invalid: ".concat(e));return e.slice(0,i.B)}},7870:(e,t,n)=>{n.d(t,{B:()=>r,U:()=>o});var r=9,o=new RegExp("^[a-z0-9]{".concat(r,"}_\\d+$"))},8052:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(1770),o=n(5188),a=n(8610),i={PAGES:"pages",LOAD:"load",PAGE_BY_PAGE:"page_by_page"},l={ITEMS:"items",EMPTY:"empty"},c=Object.values(i),u={wrapper:".collection",list:".collection__list",item:".collection__item",pagination:".collection__pagination"},s="tt_collection",f={LINK:0,SUCCESS:1,WARNING:2};var p,d=new Map,v=function(e,t){var n=(0,r.k$)(e.id),o=d.get(n);if(!o){var c=h(e);if(!c||!function(e){if("object"!=typeof e||null===e)return!1;var t=e;if("object"!=typeof t[a.QF]||null===t[a.QF])return!1;var n=t[a.QF];return!!Object.values(l).includes(n.mode)&&"boolean"==typeof n.isMain&&"boolean"==typeof n.pagination&&!!Object.values(i).includes(n.paginationType)}(JSON.parse(c)))throw Error("Unable to get params for collection: ".concat(e.id));o=t(c),d.set(n,o)}return o},h=function(e){var t,n,o,a=m();if(a){var i=(0,r.k$)(e.id),l=null===(n=null===(t=a.data)||void 0===t?void 0:t[s])||void 0===n?void 0:n[i];return null===(o=a.params)||void 0===o?void 0:o[l]}return e.getAttribute("data-do-".concat(s))},m=(p=null,function(){if(!p){var e=document.getElementById("data_do_json");if(e&&e.textContent)try{p=JSON.parse(e.textContent)}catch(e){console.error(e)}}return p}),b=function(e){return Number(e.slice(e.lastIndexOf("/")+1))},y=function(e){var t=e.target.closest("a");if(!t)return null;var n=t.closest(u.pagination);if(!(n instanceof HTMLElement))return null;var r=n.closest(u.wrapper);if(!(r instanceof HTMLElement))return null;var o=r.closest(u.item);return{link:t,pagination:n,wrapper:r,contextItem:o instanceof HTMLElement?o:null}},w=function(e){var t=e.itemId,n=e.page,r=e.contextItemId,o=r?"&param[root_item_id]=".concat(Number(r)):"",a="&param[widget_id]=".concat(t),i="&param[page]=".concat(n);return"/-/x-api/v1/public/?method=mosaic/collectionGetWidgetPage".concat(a).concat(i).concat(o)},g=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function l(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function x(e){var t=this,n=e.getParamsGenerator,l=e.elements,s=e.abortManager,p=v(l.wrapper,n)(a.$U.SCREEN),d=p.pagination,h=p.paginationType,m=p.isMain,y=h===i.LOAD;if(m&&!y)return f.LINK;var x=l.link.getAttribute("href");if(!x)return f.WARNING;var I,N=b(x);if(!("number"==typeof(I=N)&&Number.isInteger(I)&&I>0))return f.WARNING;var C=l.wrapper.querySelector(u.list),S=l.wrapper.querySelector(u.item);if(!(d&&c.includes(h)&&S instanceof HTMLElement&&C instanceof HTMLElement))return f.WARNING;if(s.get(l.wrapper))return f.WARNING;var L="",A="",T=null,_=function(){h===i.LOAD?C.insertAdjacentHTML("beforeend",L):C.innerHTML=L,l.pagination.innerHTML=A},M=function(){T=null,y&&(1===N?C.innerHTML="":C.lastElementChild instanceof HTMLElement&&(T=C.lastElementChild))};return function(e){g(t,void 0,void 0,(function(){var t,n,a,i,c,u,f,p;return E(this,(function(d){switch(d.label){case 0:t=(0,r.k$)(S.id),n=null===(p=l.contextItem)||void 0===p?void 0:p.dataset.ttCollectionItemId,a=w({itemId:t,page:e,contextItemId:n}),i=s.add(l.wrapper),c={signal:null==i?void 0:i.signal},d.label=1;case 1:return d.trys.push([1,4,5,6]),[4,fetch(a,c)];case 2:return[4,d.sent().json()];case 3:return u=d.sent(),(v=u.result)?(L=v.html_template,A=v.pagination_template):(L="",A=""),M(),_(),function(){if(y&&T)for(var e=T.nextElementSibling;e instanceof HTMLElement;)(0,o.m)(e),e=e.nextElementSibling;else(0,o.m)(C)}(),[3,6];case 4:return f=d.sent(),console.error(f),[3,6];case 5:return s.delete(l.wrapper),[7];case 6:return[2]}var v}))}))}(N),f.SUCCESS}var I=function(){function e(e){this.getParamsGenerator=e,this.abortControllers=new Map}return e.prototype.cancelNested=function(e){var t=this,n=e.querySelectorAll(u.wrapper);Array.from(n).forEach((function(n){var r=t.abortControllers.get(n.id);r&&(r.abort("Запрос для коллекции ".concat(n.id," отменен родительской коллекцией ").concat(e.id)),t.abortControllers.delete(n.id))}))},e.prototype.add=function(e){v(e,this.getParamsGenerator)(a.$U.SCREEN).paginationType!==i.LOAD&&this.cancelNested(e);var t=this.abortControllers.get(e.id);t&&t.abort("Новый запрос для листа ".concat(e.id));var n=new AbortController;return this.abortControllers.set(e.id,n),n},e.prototype.get=function(e){return this.abortControllers.get(e.id)},e.prototype.delete=function(e){this.abortControllers.delete(e.id)},e}(),N=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function l(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function S(e){return N(this,void 0,void 0,(function(){var t,r,o,a;return C(this,(function(i){switch(i.label){case 0:return[4,n.e(122).then(n.bind(n,1239))];case 1:return t=i.sent().default,Boolean(null===(a=e.parentElement)||void 0===a?void 0:a.closest(u.wrapper))?[2]:(r=new I(t),o=function(e){var n=y(e);n&&(x({getParamsGenerator:t,elements:n,abortManager:r})!==f.LINK&&e.preventDefault())},e.addEventListener("click",o),[2])}}))}))}},8610:(e,t,n)=>{n.d(t,{$U:()=>r,Ay:()=>l,QF:()=>o,Yb:()=>i});var r,o="screen",a=["(min-width: 1920px)","(min-width: 1440px)","(min-width: 1280px)",o,"(max-width: 991px)","(max-width: 767px)","(max-width: 479px)"],i=a.indexOf(o);!function(e){e.BIG_SCREEN3=0,e.BIG_SCREEN2=1,e.BIG_SCREEN1=2,e.SCREEN=3,e.TABLET_LANDSCAPE=4,e.TABLET_PORTRAIT=5,e.MOBILE=6}(r||(r={}));const l=a}}]);